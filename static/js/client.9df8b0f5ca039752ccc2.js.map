{"version":3,"sources":["webpack:///static/js/client.9df8b0f5ca039752ccc2.js","webpack:///./index.js","webpack:///./src/components/app.jsx","webpack:///./src/components/connect.jsx","webpack:///./src/components/baseplane.jsx","webpack:///./src/components/brickshape.jsx","webpack:///./src/bluetooth/ble.js","webpack:///./src/components/driver.jsx","webpack:///./src/bluetooth/order.js","webpack:///./src/components/message.jsx"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","_react","React","_reactDom","ReactDOM","_app","render","createElement","App","document","getElementById","_interopRequireDefault","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","undefined","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","_react2","_connect","_driver","_message","_React$Component","this","_this","getPrototypeOf","state","connected","device","showMessage","message","navigator","bluetooth","__html","Message","show","Driver","bind","Connect","connect","disconnect","bleDevice","setState","Component","_baseplane","_brickshape","_ble","context","bluetoothDevice","BluetoothDevice","onDisconnected","addService","addCharacteristic","_this2","Baseplate","width","height","BrickShape","bricks","shapes","cells","classShape","onTouchStart","e","_this3","then","getService","bluetoothService","getCharacteristic","setTimeout","error","msg","defaultProps","x","y","screen","window","innerWidth","innerHeight","sizeX","Math","floor","sizeY","size","grid","nbOfCellsX","ceil","nbOfCellsY","minX","maxX","minY","maxY","sizeElt","style","className","divs","push","children","forEach","child","selectElts","querySelectorAll","map","brick","join","elt","onTouchEnd","activeClassShape","addEventListener","elem","BluetoothService","name","disconnectFct","services","server","id","uuid","cId","Error","characteristics","BluetoothCharacteristic","Promise","resolve","filters","keys","requestDevice","getDevice","gatt","service","getPrimaryService","serviceId","serv","characteristicId","charact","characteristic","_this4","arrayBuffer","reject","writeValue","_order","move","direction","write","dataToSend","Order","color","code","codeByte","headerBytes","bytesValue","buf","ArrayBuffer","bufView","Uint8Array","idx","dangerouslySetInnerHTML"],"mappings":"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","file":"static/js/client.9df8b0f5ca039752ccc2.js","sourcesContent":["webpackJsonp([0,2],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _reactDom = __webpack_require__(7);\n\t\n\tvar ReactDOM = _interopRequireWildcard(_reactDom);\n\t\n\tvar _app = __webpack_require__(17);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tReactDOM.render(React.createElement(_app.App, null), document.getElementById(\"app\"));\n\t\n\t//application\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.App = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _connect = __webpack_require__(18);\n\t\n\tvar _driver = __webpack_require__(22);\n\t\n\tvar _message = __webpack_require__(24);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar App = exports.App = function (_React$Component) {\n\t  _inherits(App, _React$Component);\n\t\n\t  function App(props) {\n\t    _classCallCheck(this, App);\n\t\n\t    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\t\n\t    _this.state = { connected: false, device: null, showMessage: false, message: \"\" };\n\t    if (!navigator.bluetooth) {\n\t      _this.state.showMessage = true;\n\t      _this.state.message = { __html: \"Interface Web Bluetooth indisponible. Veuillez l'activer :<p><a class='link' target=\\\"_blank\\\" href=\\\"chrome://flags/#enable-web-bluetooth\\\">chrome://flags/#enable-web-bluetooth</a></p>\" };\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      return _react2.default.createElement(\n\t        \"div\",\n\t        null,\n\t        _react2.default.createElement(_message.Message, { show: this.state.showMessage, message: this.state.message }),\n\t        !this.state.connected ? _react2.default.createElement(_connect.Connect, { connect: this.connect.bind(this), disconnect: this.disconnect.bind(this), showMessage: this.showMessage.bind(this) }) : _react2.default.createElement(_driver.Driver, { device: this.state.device, showMessage: this.showMessage.bind(this) })\n\t      );\n\t    }\n\t  }, {\n\t    key: \"connect\",\n\t    value: function connect(bleDevice) {\n\t      this.setState({ connected: true, device: bleDevice });\n\t    }\n\t  }, {\n\t    key: \"disconnect\",\n\t    value: function disconnect() {\n\t      this.setState({ connected: false, device: null });\n\t    }\n\t  }, {\n\t    key: \"showMessage\",\n\t    value: function showMessage(message) {\n\t      if (message) {\n\t        this.setState({ showMessage: true, message: { __html: message } });\n\t      } else {\n\t        this.setState({ showMessage: false, message: null });\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}(_react2.default.Component);\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Connect = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _baseplane = __webpack_require__(19);\n\t\n\tvar _brickshape = __webpack_require__(20);\n\t\n\tvar _ble = __webpack_require__(21);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Connect = exports.Connect = function (_React$Component) {\n\t  _inherits(Connect, _React$Component);\n\t\n\t  function Connect(props, context) {\n\t    _classCallCheck(this, Connect);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Connect.__proto__ || Object.getPrototypeOf(Connect)).call(this, props, context));\n\t\n\t    _this.bluetoothDevice = new _ble.BluetoothDevice(\"LEO\", _this.onDisconnected.bind(_this));\n\t    _this.bluetoothDevice.addService(\"sCommand\", \"6e400001-b5a3-f393-e0a9-e50e24dcca9e\");\n\t    _this.bluetoothDevice.addCharacteristic(\"sCommand\", \"cCommand\", \"6e400002-b5a3-f393-e0a9-e50e24dcca9e\");\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Connect, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      return React.createElement(\n\t        _baseplane.Baseplate,\n\t        { width: 18, height: 26 },\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[0].cells, classShape: \"lego blue upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[1].cells, onTouchStart: function onTouchStart(e) {\n\t            return _this2.connect();\n\t          }, classShape: \"lego grey upper\" })\n\t      );\n\t    }\n\t  }, {\n\t    key: \"connect\",\n\t    value: function connect() {\n\t      var _this3 = this;\n\t\n\t      console.log(\"connexion\");\n\t      this.showMessage(\"Connexion à Léo en cours...\");\n\t      this.bluetoothDevice.connect().then(function () {\n\t        return _this3.bluetoothDevice.getService(\"sCommand\");\n\t      }).then(function (bluetoothService) {\n\t        return bluetoothService.getCharacteristic(\"cCommand\");\n\t      }).then(function () {\n\t        _this3.showMessage(\"Vous êtes maintenant connecté à Léo... à vous de jouer !\");\n\t        setTimeout(function () {\n\t          if (_this3.props.connect) {\n\t            _this3.showMessage(\"\");\n\t            _this3.props.connect(_this3.bluetoothDevice);\n\t          }\n\t        }, 1000);\n\t      }).catch(function (error) {\n\t        _this3.showMessage(\"Erreur lors de la connexion à Léo : \" + error);\n\t        console.log(error);\n\t        setTimeout(function () {\n\t          _this3.showMessage();\n\t        }, 3000);\n\t      });\n\t    }\n\t  }, {\n\t    key: \"onDisconnected\",\n\t    value: function onDisconnected() {\n\t      if (this.props.disconnect) {\n\t        this.props.disconnect();\n\t      }\n\t    }\n\t  }, {\n\t    key: \"showMessage\",\n\t    value: function showMessage(msg) {\n\t      if (this.props.showMessage) {\n\t        this.props.showMessage(msg);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Connect;\n\t}(React.Component);\n\t\n\tConnect.defaultProps = {\n\t  shapes: [{ cells: [\n\t    //L\n\t    { x: 3, y: 2 }, { x: 3, y: 3 }, { x: 3, y: 4 }, { x: 3, y: 5 }, { x: 3, y: 6 }, { x: 4, y: 6 }, { x: 5, y: 6 }, { x: 6, y: 6 },\n\t    //E\n\t    { x: 8, y: 2 }, { x: 8, y: 3 }, { x: 8, y: 5 }, { x: 8, y: 6 }, { x: 9, y: 2 }, { x: 10, y: 2 }, { x: 11, y: 2 }, { x: 9, y: 4 }, { x: 10, y: 4 }, { x: 9, y: 6 }, { x: 10, y: 6 }, { x: 11, y: 6 },\n\t    // O\n\t    { x: 13, y: 2 }, { x: 13, y: 3 }, { x: 13, y: 4 }, { x: 13, y: 5 }, { x: 13, y: 6 }, { x: 14, y: 2 }, { x: 15, y: 2 }, { x: 14, y: 6 }, { x: 15, y: 6 }, { x: 16, y: 6 }, { x: 16, y: 3 }, { x: 16, y: 4 }, { x: 16, y: 5 }]\n\t  }, { cells: [{ x: 5, y: 12 }, { x: 6, y: 12 }, { x: 6, y: 13 }, { x: 7, y: 13 }, { x: 7, y: 14 }, { x: 8, y: 14 }, { x: 8, y: 15 }, { x: 5, y: 20 }, { x: 6, y: 20 }, { x: 6, y: 19 }, { x: 7, y: 19 }, { x: 7, y: 18 }, { x: 8, y: 18 }, { x: 8, y: 17 }, { x: 9, y: 10 }, { x: 9, y: 11 }, { x: 9, y: 12 }, { x: 9, y: 13 }, { x: 9, y: 14 }, { x: 9, y: 15 }, { x: 9, y: 16 }, { x: 9, y: 17 }, { x: 9, y: 18 }, { x: 9, y: 19 }, { x: 9, y: 20 }, { x: 9, y: 21 }, { x: 9, y: 22 }, { x: 10, y: 10 }, { x: 10, y: 11 }, { x: 10, y: 12 }, { x: 10, y: 13 }, { x: 10, y: 14 }, { x: 10, y: 15 }, { x: 10, y: 16 }, { x: 10, y: 17 }, { x: 10, y: 18 }, { x: 10, y: 19 }, { x: 10, y: 20 }, { x: 10, y: 21 }, { x: 10, y: 22 }, { x: 11, y: 11 }, { x: 11, y: 12 }, { x: 12, y: 12 }, { x: 12, y: 13 }, { x: 13, y: 13 }, { x: 13, y: 14 }, { x: 13, y: 15 }, { x: 14, y: 14 }, { x: 12, y: 15 }, { x: 12, y: 16 }, { x: 11, y: 16 }, { x: 12, y: 17 }, { x: 13, y: 17 }, { x: 13, y: 18 }, { x: 13, y: 19 }, { x: 14, y: 18 }, { x: 12, y: 19 }, { x: 12, y: 20 }, { x: 11, y: 20 }, { x: 11, y: 21 }]\n\t  }]\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Baseplate = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Baseplate = exports.Baseplate = function (_React$Component) {\n\t  _inherits(Baseplate, _React$Component);\n\t\n\t  function Baseplate(props, context) {\n\t    _classCallCheck(this, Baseplate);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Baseplate.__proto__ || Object.getPrototypeOf(Baseplate)).call(this, props, context));\n\t\n\t    var screen = {\n\t      width: window.innerWidth,\n\t      height: window.innerHeight\n\t    };\n\t\n\t    var sizeX = screen.width / _this.props.width;\n\t    sizeX = sizeX > 40 ? 40 : Math.floor(sizeX);\n\t    var sizeY = screen.height / _this.props.height;\n\t    sizeY = sizeY > 40 ? 40 : Math.floor(sizeY);\n\t\n\t    if (sizeX < sizeY) sizeY = sizeX;\n\t    if (sizeY < sizeX) sizeX = sizeY;\n\t\n\t    var size = sizeX;\n\t\n\t    var grid = {\n\t      nbOfCellsX: Math.ceil(Math.ceil(screen.width / size) / 2) * 2,\n\t      nbOfCellsY: Math.ceil(Math.ceil(screen.height / size) / 2) * 2\n\t    };\n\t\n\t    grid.minX = (grid.nbOfCellsX - _this.props.width) / -2;\n\t    grid.maxX = (grid.nbOfCellsX - _this.props.width) / 2 + 1 + _this.props.width;\n\t    grid.minY = (grid.nbOfCellsY - _this.props.height) / -2;\n\t    grid.maxY = (grid.nbOfCellsY - _this.props.height) / 2 + 1 + _this.props.height;\n\t    grid.width = grid.nbOfCellsX * size;\n\t    grid.height = grid.nbOfCellsY * size;\n\t    grid.sizeElt = size;\n\t\n\t    _this.state = grid;\n\t\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Baseplate, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t\n\t      var style = {\n\t        width: this.state.sizeElt,\n\t        height: this.state.sizeElt\n\t      };\n\t\n\t      var className = \"lego darkgrey\";\n\t      var onClick = undefined;\n\t\n\t      var divs = [];\n\t      for (var y = this.state.minY; y < this.state.maxY; y++) {\n\t        if (y === 0) continue;\n\t        for (var x = this.state.minX; x < this.state.maxX; x++) {\n\t          if (x === 0) continue;\n\t          divs.push(React.createElement(\"div\", { key: y + \"_\" + x, className: className, style: style, x: x, y: y }));\n\t        }\n\t      }\n\t\n\t      return React.createElement(\n\t        \"div\",\n\t        { className: \"baseplate\", style: { width: this.state.width, height: this.state.height } },\n\t        divs\n\t      );\n\t    }\n\t  }, {\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this.props.children.forEach(function (child) {\n\t        var selectElts = document.querySelectorAll(child.props.bricks.map(function (brick) {\n\t          return \"[x='\" + brick.x + \"'][y='\" + brick.y + \"']\";\n\t        }).join(\",\"));\n\t        selectElts.forEach(function (elt) {\n\t          elt.className = child.props.classShape;\n\t          if (!child.props.onTouchStart && !child.props.onTouchEnd && !child.props.activeClassShape) return;\n\t          elt.addEventListener(\"touchstart\", function (e) {\n\t            if (child.props.activeClassShape) {\n\t              selectElts.forEach(function (elem) {\n\t                elem.className = child.props.activeClassShape;\n\t              });\n\t            }\n\t            if (child.props.onTouchStart) {\n\t              child.props.onTouchStart();\n\t            }\n\t          });\n\t          elt.addEventListener(\"touchend\", function (e) {\n\t            if (child.props.classShape) {\n\t              selectElts.forEach(function (elem) {\n\t                elem.className = child.props.classShape;\n\t              });\n\t            } else {\n\t              elt.className = \"lego darkgrey\";\n\t            }\n\t            if (child.props.onTouchEnd) {\n\t              child.props.onTouchEnd();\n\t            }\n\t          });\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Baseplate;\n\t}(React.Component);\n\t\n\tBaseplate.defaultProps = {\n\t  height: 10,\n\t  width: 10\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.BrickShape = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar BrickShape = exports.BrickShape = function (_React$Component) {\n\t    _inherits(BrickShape, _React$Component);\n\t\n\t    function BrickShape(props, context) {\n\t        _classCallCheck(this, BrickShape);\n\t\n\t        return _possibleConstructorReturn(this, (BrickShape.__proto__ || Object.getPrototypeOf(BrickShape)).call(this, props, context));\n\t    }\n\t\n\t    _createClass(BrickShape, [{\n\t        key: 'render',\n\t        value: function render() {}\n\t    }]);\n\t\n\t    return BrickShape;\n\t}(React.Component);\n\t\n\tBrickShape.defaultProps = {\n\t    height: 1,\n\t    width: 1\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar BluetoothDevice = exports.BluetoothDevice = function () {\n\t\tfunction BluetoothDevice(name, disconnectFct) {\n\t\t\t_classCallCheck(this, BluetoothDevice);\n\t\n\t\t\tthis.name = name;\n\t\t\tthis.services = {};\n\t\t\tthis.device = undefined;\n\t\t\tthis.server = undefined;\n\t\t\tthis.disconnectFct = disconnectFct;\n\t\t}\n\t\n\t\t_createClass(BluetoothDevice, [{\n\t\t\tkey: \"addService\",\n\t\t\tvalue: function addService(id, uuid) {\n\t\t\t\tthis.services[id] = new BluetoothService(uuid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addCharacteristic\",\n\t\t\tvalue: function addCharacteristic(id, cId, uuid) {\n\t\t\t\tif (!this.services[id]) {\n\t\t\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t\t\t}\n\t\t\t\tthis.services[id].characteristics[cId] = new BluetoothCharacteristic(uuid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getDevice\",\n\t\t\tvalue: function getDevice() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tif (this.device) {\n\t\t\t\t\treturn Promise.resolve(this.device);\n\t\t\t\t} else {\n\t\n\t\t\t\t\tvar filters = [{\n\t\t\t\t\t\tname: this.name\n\t\t\t\t\t}];\n\t\n\t\t\t\t\tif (this.services) {\n\t\t\t\t\t\tfilters[0].services = [];\n\t\t\t\t\t\tObject.keys(this.services).forEach(function (key) {\n\t\t\t\t\t\t\tfilters[0].services.push(_this.services[key].uuid);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn navigator.bluetooth.requestDevice({ filters: filters }).then(function (device) {\n\t\t\t\t\t\t_this.device = device;\n\t\t\t\t\t\tdevice.addEventListener('gattserverdisconnected', _this.onDisconnected.bind(_this));\n\t\t\t\t\t\treturn device;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"connect\",\n\t\t\tvalue: function connect() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this.server) {\n\t\t\t\t\treturn Promise.resolve(this.server);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.getDevice().then(function (device) {\n\t\t\t\t\t\treturn device.gatt.connect();\n\t\t\t\t\t}).then(function (server) {\n\t\t\t\t\t\t_this2.server = server;\n\t\t\t\t\t\treturn server;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getService\",\n\t\t\tvalue: function getService(id) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif (!this.services[id]) {\n\t\t\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t\t\t}\n\t\t\t\tif (!this.server) {\n\t\t\t\t\tthrow new Error(\"Server GATT not initialized.\");\n\t\t\t\t}\n\t\t\t\tif (this.services[id].service) {\n\t\t\t\t\treturn Promise.resolve(this.services[id]);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.connect().then(function (server) {\n\t\t\t\t\t\treturn _this3.server.getPrimaryService(_this3.services[id].uuid);\n\t\t\t\t\t}).then(function (service) {\n\t\t\t\t\t\t_this3.services[id].service = service;\n\t\t\t\t\t\treturn _this3.services[id];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"onDisconnected\",\n\t\t\tvalue: function onDisconnected() {\n\t\t\t\tthis.server = undefined;\n\t\t\t\tfor (var serviceId in this.services) {\n\t\t\t\t\tvar serv = this.services[serviceId];\n\t\t\t\t\tdelete serv.service;\n\t\t\t\t\tfor (var characteristicId in serv.characteristics) {\n\t\t\t\t\t\tvar charact = serv.characteristics[characteristicId];\n\t\t\t\t\t\tdelete charact.characteristic;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (this.disconnectFct) {\n\t\t\t\t\tthis.disconnectFct();\n\t\t\t\t}\n\t\t\t\tconsole.log('Device ' + this + ' is disconnected.');\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"disconnect\",\n\t\t\tvalue: function disconnect() {\n\t\t\t\tif (!this.device) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (this.device.gatt.connected) {\n\t\t\t\t\tthis.device.gatt.disconnect();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Bluetooth Device is already disconnected');\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn BluetoothDevice;\n\t}();\n\t\n\tvar BluetoothService = exports.BluetoothService = function () {\n\t\tfunction BluetoothService(uuid) {\n\t\t\t_classCallCheck(this, BluetoothService);\n\t\n\t\t\tthis.uuid = uuid;\n\t\t\tthis.characteristics = {};\n\t\t\tthis.service = undefined;\n\t\t}\n\t\n\t\t_createClass(BluetoothService, [{\n\t\t\tkey: \"addCharacteristic\",\n\t\t\tvalue: function addCharacteristic(id, uuid) {\n\t\t\t\tthis.characteristics[id] = new BluetoothCharacteristic(uuid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getCharacteristic\",\n\t\t\tvalue: function getCharacteristic(id) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (!this.characteristics[id]) {\n\t\t\t\t\tthrow new Error(\"Characteristic id unknowned :\" + id);\n\t\t\t\t}\n\t\t\t\tif (!this.service) {\n\t\t\t\t\tthrow new Error(\"Service not initialized.\");\n\t\t\t\t}\n\t\t\t\tif (this.characteristics[id].characteristic) {\n\t\t\t\t\treturn Promise.resolve(this.characteristics[id]);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.service.getCharacteristic(this.characteristics[id].uuid).then(function (characteristic) {\n\t\t\t\t\t\t_this4.characteristics[id].characteristic = characteristic;\n\t\t\t\t\t\treturn _this4.characteristics[id];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn BluetoothService;\n\t}();\n\t\n\tvar BluetoothCharacteristic = exports.BluetoothCharacteristic = function () {\n\t\tfunction BluetoothCharacteristic(uuid) {\n\t\t\t_classCallCheck(this, BluetoothCharacteristic);\n\t\n\t\t\tthis.uuid = uuid;\n\t\t\tthis.characteristic = undefined;\n\t\t}\n\t\n\t\t_createClass(BluetoothCharacteristic, [{\n\t\t\tkey: \"write\",\n\t\t\tvalue: function write(arrayBuffer) {\n\t\t\t\tif (!this.characteristic) {\n\t\t\t\t\tPromise.reject(new Error(\"Characteristic not initialized, use getCharacteristic on service.\"));\n\t\t\t\t}\n\t\t\t\treturn this.characteristic.writeValue(arrayBuffer);\n\t\t\t}\n\t\t}]);\n\n\t\treturn BluetoothCharacteristic;\n\t}();\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Driver = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _baseplane = __webpack_require__(19);\n\t\n\tvar _brickshape = __webpack_require__(20);\n\t\n\tvar _order = __webpack_require__(23);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Driver = exports.Driver = function (_React$Component) {\n\t  _inherits(Driver, _React$Component);\n\t\n\t  function Driver(props, context) {\n\t    _classCallCheck(this, Driver);\n\t\n\t    return _possibleConstructorReturn(this, (Driver.__proto__ || Object.getPrototypeOf(Driver)).call(this, props, context));\n\t  }\n\t\n\t  _createClass(Driver, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      console.log(\"render\");\n\t      return React.createElement(\n\t        _baseplane.Baseplate,\n\t        { width: 18, height: 26 },\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[0].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(1);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[1].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(2);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[2].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(3);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[3].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(4);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[4].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.disconnect();\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[5].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(5);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[6].cells, classShape: \"lego grey upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[7].cells, classShape: \"lego grey upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[8].cells, classShape: \"lego grey upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[9].cells, classShape: \"lego grey upper\" })\n\t      );\n\t    }\n\t  }, {\n\t    key: \"move\",\n\t    value: function move(direction) {\n\t      var _this3 = this;\n\t\n\t      this.props.device.getService(\"sCommand\").then(function (service) {\n\t        return service.getCharacteristic(\"cCommand\");\n\t      }).then(function (characteristic) {\n\t        return characteristic.write(_this3.props.move.dataToSend([direction]));\n\t      }).catch(function (error) {\n\t        _this3.showMessage(\"Erreur lors de l'envoi de la commande à LEO : \" + error + \". Deconnexion en cours...\");\n\t        console.log(error);\n\t        setTimeout(function () {\n\t          _this3.disconnect();\n\t        }, 3000);\n\t      });\n\t    }\n\t  }, {\n\t    key: \"disconnect\",\n\t    value: function disconnect() {\n\t      var _this4 = this;\n\t\n\t      this.showMessage(\"Au revoir...\");\n\t      setTimeout(function () {\n\t        _this4.showMessage(\"\");\n\t        _this4.props.device.disconnect();\n\t      }, 1000);\n\t    }\n\t  }, {\n\t    key: \"showMessage\",\n\t    value: function showMessage(msg) {\n\t      if (this.props.showMessage) {\n\t        this.props.showMessage(msg);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Driver;\n\t}(React.Component);\n\t\n\tDriver.defaultProps = {\n\t  move: new _order.Order(0x02),\n\t  color: new _order.Order(0x03),\n\t  shapes: [{\n\t    cells: [\n\t    //HAUT\n\t    { x: 9, y: 2 }, { x: 10, y: 2 }, { x: 8, y: 3 }, { x: 9, y: 3 }, { x: 10, y: 3 }, { x: 11, y: 3 }, { x: 7, y: 4 }, { x: 8, y: 4 }, { x: 9, y: 4 }, { x: 10, y: 4 }, { x: 11, y: 4 }, { x: 12, y: 4 }, { x: 6, y: 5 }, { x: 7, y: 5 }, { x: 8, y: 5 }, { x: 9, y: 5 }, { x: 10, y: 5 }, { x: 11, y: 5 }, { x: 12, y: 5 }, { x: 13, y: 5 }]\n\t  }, {\n\t    cells: [\n\t    //BAS\n\t    { x: 9, y: 17 }, { x: 10, y: 17 }, { x: 8, y: 16 }, { x: 9, y: 16 }, { x: 10, y: 16 }, { x: 11, y: 16 }, { x: 7, y: 15 }, { x: 8, y: 15 }, { x: 9, y: 15 }, { x: 10, y: 15 }, { x: 11, y: 15 }, { x: 12, y: 15 }, { x: 6, y: 14 }, { x: 7, y: 14 }, { x: 8, y: 14 }, { x: 9, y: 14 }, { x: 10, y: 14 }, { x: 11, y: 14 }, { x: 12, y: 14 }, { x: 13, y: 14 }]\n\t  }, {\n\t    cells: [\n\t    //GAUCHE\n\t    { x: 2, y: 9 }, { x: 2, y: 10 }, { x: 3, y: 8 }, { x: 3, y: 9 }, { x: 3, y: 10 }, { x: 3, y: 11 }, { x: 4, y: 7 }, { x: 4, y: 8 }, { x: 4, y: 9 }, { x: 4, y: 10 }, { x: 4, y: 11 }, { x: 4, y: 12 }, { x: 5, y: 6 }, { x: 5, y: 7 }, { x: 5, y: 8 }, { x: 5, y: 9 }, { x: 5, y: 10 }, { x: 5, y: 11 }, { x: 5, y: 12 }, { x: 5, y: 13 }]\n\t  }, {\n\t    cells: [\n\t    //DROITE\n\t    { x: 17, y: 9 }, { x: 17, y: 10 }, { x: 16, y: 8 }, { x: 16, y: 9 }, { x: 16, y: 10 }, { x: 16, y: 11 }, { x: 15, y: 7 }, { x: 15, y: 8 }, { x: 15, y: 9 }, { x: 15, y: 10 }, { x: 15, y: 11 }, { x: 15, y: 12 }, { x: 14, y: 6 }, { x: 14, y: 7 }, { x: 14, y: 8 }, { x: 14, y: 9 }, { x: 14, y: 10 }, { x: 14, y: 11 }, { x: 14, y: 12 }, { x: 14, y: 13 }]\n\t  }, {\n\t    cells: [\n\t    //CROIX\n\t    { x: 8, y: 20 }, { x: 11, y: 20 }, { x: 9, y: 21 }, { x: 10, y: 21 }, { x: 9, y: 22 }, { x: 10, y: 22 }, { x: 8, y: 23 }, { x: 11, y: 23 }]\n\t  }, {\n\t    cells: [\n\t    //TOUPIE\n\t    { x: 7, y: 7 }, { x: 8, y: 7 }, { x: 9, y: 7 }, { x: 10, y: 7 }, { x: 11, y: 7 }, { x: 12, y: 7 }, { x: 7, y: 8 }, { x: 7, y: 9 }, { x: 7, y: 10 }, { x: 7, y: 11 }, { x: 7, y: 12 }, { x: 8, y: 12 }, { x: 9, y: 12 }, { x: 10, y: 12 }, { x: 11, y: 12 }, { x: 12, y: 12 }, { x: 12, y: 9 }, { x: 12, y: 10 }, { x: 12, y: 11 }, { x: 9, y: 9 }, { x: 10, y: 9 }, { x: 11, y: 9 }, { x: 9, y: 10 }]\n\t  }, {\n\t    cells: [\n\t    //HAUT GAUCHE\n\t    { x: 3, y: 3 }, { x: 4, y: 3 }, { x: 5, y: 3 }, { x: 3, y: 4 }, { x: 3, y: 5 }]\n\t  }, {\n\t    cells: [\n\t    //HAUT DROITE\n\t    { x: 14, y: 3 }, { x: 15, y: 3 }, { x: 16, y: 3 }, { x: 16, y: 4 }, { x: 16, y: 5 }]\n\t  }, {\n\t    cells: [\n\t    //BAS GAUCHE\n\t    { x: 3, y: 14 }, { x: 3, y: 15 }, { x: 3, y: 16 }, { x: 4, y: 16 }, { x: 5, y: 16 }]\n\t  }, {\n\t    cells: [\n\t    //BAS DROITE\n\t    { x: 14, y: 16 }, { x: 15, y: 16 }, { x: 16, y: 16 }, { x: 16, y: 14 }, { x: 16, y: 15 }]\n\t  }]\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Order = exports.Order = function () {\n\t\tfunction Order(code) {\n\t\t\t_classCallCheck(this, Order);\n\t\n\t\t\tthis.codeByte = code;\n\t\t\tthis.headerBytes = [0xBA, 0xBA, 0xAA, 0xAA];\n\t\t}\n\t\n\t\t_createClass(Order, [{\n\t\t\tkey: \"dataToSend\",\n\t\t\tvalue: function dataToSend(bytesValue) {\n\t\t\t\tvar buf = new ArrayBuffer(this.headerBytes.length + 1 + bytesValue.length);\n\t\t\t\tvar bufView = new Uint8Array(buf);\n\t\t\t\tvar idx = 0;\n\t\t\t\t// Gestion de l'inversion par paire des bytes\n\t\n\t\t\t\tfor (var i = 0; i < this.headerBytes.length; i += 1) {\n\t\t\t\t\tbufView[idx++] = this.headerBytes[i];\n\t\t\t\t}\n\t\n\t\t\t\tbufView[idx++] = this.codeByte;\n\t\n\t\t\t\t// Gestion de l'inversion par paire des bytes\n\t\t\t\tfor (var _i = 0; _i < bytesValue.length; _i += 1) {\n\t\t\t\t\tbufView[idx++] = bytesValue[_i];\n\t\t\t\t}\n\t\t\t\treturn buf;\n\t\t\t}\n\t\t}]);\n\n\t\treturn Order;\n\t}();\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Message = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Message = exports.Message = function (_React$Component) {\n\t  _inherits(Message, _React$Component);\n\t\n\t  function Message(props, context) {\n\t    _classCallCheck(this, Message);\n\t\n\t    return _possibleConstructorReturn(this, (Message.__proto__ || Object.getPrototypeOf(Message)).call(this, props, context));\n\t  }\n\t\n\t  _createClass(Message, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      return React.createElement(\n\t        \"div\",\n\t        null,\n\t        this.props.show && React.createElement(\n\t          \"div\",\n\t          { className: \"popin\" },\n\t          React.createElement(\"div\", { className: \"message\", dangerouslySetInnerHTML: this.props.message })\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Message;\n\t}(React.Component);\n\t\n\t;\n\t\n\tMessage.defaultProps = {\n\t  show: false\n\t};\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** static/js/client.9df8b0f5ca039752ccc2.js\n **/","import * as React from \"react\"\nimport * as ReactDOM from \"react-dom\";\n\n//application\nimport {App} from \"./src/components/app\";\n\nReactDOM.render(<App/>, document.getElementById(\"app\"));\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","import React from 'react'\nimport {Connect} from \"./connect\";\nimport {Driver} from \"./driver\";\nimport {Message} from \"./message\";\n\nexport class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {connected: false, device: null, showMessage: false, message: \"\"};\n    if (!navigator.bluetooth) {\n      this.state.showMessage = true;\n      this.state.message = {__html: \"Interface Web Bluetooth indisponible. Veuillez l'activer :<p><a class='link' target=\\\"_blank\\\" href=\\\"chrome://flags/#enable-web-bluetooth\\\">chrome://flags/#enable-web-bluetooth</a></p>\"};\n    }\n  }\n\n  render() {\n    return (<div>\n      <Message show={this.state.showMessage} message={this.state.message}/>\n      {!this.state.connected ? (\n        <Connect connect={this.connect.bind(this)}  disconnect={this.disconnect.bind(this)} showMessage={this.showMessage.bind(this)}/>\n      ) : (\n        <Driver device={this.state.device} showMessage={this.showMessage.bind(this)}/>\n      )}\n    </div>);\n  }\n\n  connect(bleDevice) {\n    this.setState({connected: true, device: bleDevice });\n  }\n\n  disconnect() {\n    this.setState({connected: false, device: null });\n  }\n\n  showMessage(message) {\n    if (message) {\n      this.setState({showMessage: true, message: {__html: message} });\n    } else {\n      this.setState({showMessage: false, message: null });\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/app.jsx\n **/","import * as React from 'react'\nimport {Baseplate} from \"./baseplane\";\nimport {BrickShape} from \"./brickshape\";\nimport {BluetoothDevice} from \"../bluetooth/ble\";\n\nexport class Connect extends React.Component {\n\n    constructor(props, context) {\n      super(props, context);\n\n      this.bluetoothDevice = new BluetoothDevice(\"LEO\", this.onDisconnected.bind(this));\n      this.bluetoothDevice.addService(\"sCommand\", \"6e400001-b5a3-f393-e0a9-e50e24dcca9e\");\n      this.bluetoothDevice.addCharacteristic(\"sCommand\", \"cCommand\", \"6e400002-b5a3-f393-e0a9-e50e24dcca9e\");\n    }\n\n    render() {\n        return (\n            <Baseplate width={18} height={26}>\n              <BrickShape bricks={this.props.shapes[0].cells} classShape=\"lego blue upper\"/>\n              <BrickShape bricks={this.props.shapes[1].cells} onTouchStart={(e) => this.connect()} classShape=\"lego grey upper\"/>\n            </Baseplate>\n\n        );\n    }\n\n    connect() {\n      console.log(\"connexion\");\n      this.showMessage(\"Connexion à Léo en cours...\");\n    \tthis.bluetoothDevice.connect()\n    \t.then(() => {\n    \t\treturn this.bluetoothDevice.getService(\"sCommand\");\n    \t})\n    \t.then((bluetoothService) => {\n    \t\treturn bluetoothService.getCharacteristic(\"cCommand\");\n    \t})\n    \t.then(() => {\n        this.showMessage(\"Vous êtes maintenant connecté à Léo... à vous de jouer !\");\n        setTimeout(() => {\n          if (this.props.connect) {\n            this.showMessage(\"\");\n            this.props.connect(this.bluetoothDevice);\n          }\n        }, 1000);\n    \t})\n      .catch(error => {\n        this.showMessage(\"Erreur lors de la connexion à Léo : \" + error);\n        console.log(error);\n        setTimeout(() => {\n          this.showMessage();\n        }, 3000);\n      });\n    }\n\n    onDisconnected() {\n      if (this.props.disconnect) {\n        this.props.disconnect();\n      }\n    }\n\n    showMessage(msg){\n      if (this.props.showMessage) {\n        this.props.showMessage(msg);\n      }\n    }\n\n}\n\nConnect.defaultProps = {\n  shapes : [{cells : [\n              //L\n              {x:3, y:2}, {x:3, y:3}, {x:3, y:4}, {x:3, y:5}, {x:3, y:6}, {x:4, y:6}, {x:5, y:6}, {x:6, y:6},\n               //E\n              {x:8, y:2}, {x:8, y:3}, {x:8, y:5}, {x:8, y:6},\n              {x:9, y:2}, {x:10, y:2}, {x:11, y:2},\n              {x:9, y:4}, {x:10, y:4},\n              {x:9, y:6}, {x:10, y:6}, {x:11, y:6},\n              // O\n              {x:13, y:2}, {x:13, y:3}, {x:13, y:4}, {x:13, y:5}, {x:13, y:6},\n              {x:14, y:2}, {x:15, y:2},\n              {x:14, y:6}, {x:15, y:6}, {x:16, y:6},\n              {x:16, y:3}, {x:16, y:4}, {x:16, y:5}\n          ]\n      },\n      {cells : [\n              {x:5, y:12}, {x:6, y:12}, {x:6, y:13}, {x:7, y:13}, {x:7, y:14}, {x:8, y:14}, {x:8, y:15},\n              {x:5, y:20}, {x:6, y:20}, {x:6, y:19}, {x:7, y:19}, {x:7, y:18}, {x:8, y:18}, {x:8, y:17},\n              {x:9, y:10}, {x:9, y:11}, {x:9, y:12}, {x:9, y:13}, {x:9, y:14}, {x:9, y:15}, {x:9, y:16}, {x:9, y:17}, {x:9, y:18}, {x:9, y:19}, {x:9, y:20}, {x:9, y:21}, {x:9, y:22},\n              {x:10, y:10}, {x:10, y:11}, {x:10, y:12}, {x:10, y:13}, {x:10, y:14}, {x:10, y:15}, {x:10, y:16}, {x:10, y:17}, {x:10, y:18}, {x:10, y:19}, {x:10, y:20}, {x:10, y:21}, {x:10, y:22},\n              {x:11, y:11}, {x:11, y:12}, {x:12, y:12}, {x:12, y:13}, {x:13, y:13}, {x:13, y:14}, {x:13, y:15}, {x:14, y:14},\n              {x:12, y:15}, {x:12, y:16}, {x:11, y:16},\n              {x:12, y:17}, {x:13, y:17}, {x:13, y:18}, {x:13, y:19}, {x:14, y:18},\n              {x:12, y:19}, {x:12, y:20}, {x:11, y:20}, {x:11, y:21}\n          ]\n          }]\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/connect.jsx\n **/","import * as React from 'react'\n\nexport class Baseplate extends React.Component {\n\n    constructor(props, context) {\n\n        super(props, context);\n\n        var screen = {\n            width : window.innerWidth,\n            height : window.innerHeight\n        } ;\n\n        var sizeX = screen.width / this.props.width ;\n        sizeX = sizeX > 40 ? 40 : Math.floor(sizeX) ;\n        var sizeY = screen.height / this.props.height ;\n        sizeY = sizeY > 40 ? 40 : Math.floor(sizeY) ;\n\n        if(sizeX < sizeY) sizeY = sizeX;\n        if(sizeY < sizeX) sizeX = sizeY;\n\n        var size = sizeX ;\n\n        var grid = {\n            nbOfCellsX : Math.ceil(Math.ceil(screen.width / size) / 2) * 2 ,\n            nbOfCellsY : Math.ceil(Math.ceil(screen.height / size) / 2) * 2 ,\n        };\n\n        grid.minX = (grid.nbOfCellsX - this.props.width) / -2;\n        grid.maxX = (grid.nbOfCellsX - this.props.width) / 2 + 1 + this.props.width ;\n        grid.minY = (grid.nbOfCellsY - this.props.height) / -2;\n        grid.maxY = (grid.nbOfCellsY - this.props.height) / 2 + 1 + this.props.height ;\n        grid.width = grid.nbOfCellsX * size ;\n        grid.height = grid.nbOfCellsY * size ;\n        grid.sizeElt = size ;\n\n        this.state = grid ;\n\n    }\n\n    render() {\n\n      let style = {\n        width: this.state.sizeElt,\n        height: this.state.sizeElt\n      }\n\n      let className = \"lego darkgrey\";\n      let onClick = undefined;\n\n      let divs = [];\n      for (let y = this.state.minY ; y < this.state.maxY ; y++) {\n        if(y === 0) continue ;\n        for(let x = this.state.minX ; x < this.state.maxX ; x++){\n          if(x === 0) continue ;\n          divs.push(<div key={y+\"_\"+x} className={className} style={style} x={x} y={y}/>);\n        }\n      }\n\n      return (\n        <div className=\"baseplate\" style={{width: this.state.width, height: this.state.height}}>\n          {divs}\n        </div>\n      );\n    }\n\n    componentDidMount() {\n      this.props.children.forEach((child) => {\n        let selectElts  = document.querySelectorAll(child.props.bricks.map((brick)=>{return \"[x='\"+brick.x+\"'][y='\"+brick.y+\"']\"}).join(\",\"));\n        selectElts.forEach((elt)=>{\n          elt.className = child.props.classShape;\n          if (!child.props.onTouchStart && !child.props.onTouchEnd && !child.props.activeClassShape) return;\n          elt.addEventListener(\"touchstart\", (e) => {\n            if (child.props.activeClassShape) {\n              selectElts.forEach((elem)=>{\n                elem.className = child.props.activeClassShape;\n              });\n            }\n            if (child.props.onTouchStart) {\n              child.props.onTouchStart();\n            }\n          });\n          elt.addEventListener(\"touchend\", (e) => {\n            if (child.props.classShape) {\n              selectElts.forEach((elem)=>{\n                elem.className = child.props.classShape;\n              });\n            } else {\n              elt.className = \"lego darkgrey\";\n            }\n            if (child.props.onTouchEnd) {\n              child.props.onTouchEnd();\n            }\n          });\n        });\n      });\n    }\n}\n\nBaseplate.defaultProps = {\n    height: 10,\n    width: 10\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/baseplane.jsx\n **/","import * as React from 'react'\n\nexport class BrickShape extends React.Component {\n\n    constructor(props, context) {\n        super(props, context);\n\n    }\n\n    render() {\n\n    }\n\n}\n\nBrickShape.defaultProps = {\n    height: 1,\n    width: 1\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/brickshape.jsx\n **/","export class BluetoothDevice {\n\n\tconstructor(name, disconnectFct) {\n\t\tthis.name = name;\n\t\tthis.services = {};\n\t\tthis.device = undefined;\n\t\tthis.server = undefined;\n\t\tthis.disconnectFct = disconnectFct;\n\t}\n\n\taddService(id, uuid) {\n\t\tthis.services[id] = new BluetoothService(uuid);\n\t}\n\n\taddCharacteristic(id, cId, uuid) {\n\t\tif (!this.services[id]) {\n\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t}\n\t\tthis.services[id].characteristics[cId] = new BluetoothCharacteristic(uuid);\n\t}\n\n\tgetDevice() {\n\n\t\tif (this.device) {\n\t\t\treturn Promise.resolve(this.device);\n\t\t} else {\n\n\t\t\tlet filters = [{\n\t\t\t\tname: this.name\n\t\t\t}];\n\n\t\t\tif (this.services) {\n\t\t\t\tfilters[0].services = [];\n\t\t\t\tObject.keys(this.services).forEach((key) => {\n\t\t    \tfilters[0].services.push(this.services[key].uuid);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn navigator.bluetooth.requestDevice({filters: filters})\n\t\t  .then(device => {\n\t\t    this.device = device;\n\t\t    device.addEventListener('gattserverdisconnected', this.onDisconnected.bind(this));\n\t\t    return device;\n\t\t  })\n\t\t}\n\n\t}\n\n\tconnect() {\n\t\tif (this.server) {\n\t\t\treturn Promise.resolve(this.server);\n\t\t} else {\n\t\t\treturn this.getDevice().then((device) => {\n\t\t\t\treturn device.gatt.connect();\n\t\t\t}).then((server) => {\n\t\t\t\tthis.server = server;\n\t\t\t\treturn server;\n\t\t\t});\n\t\t}\n\t}\n\n\tgetService(id) {\n\t\tif (!this.services[id]) {\n\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t}\n\t\tif (!this.server) {\n\t\t\tthrow new Error(\"Server GATT not initialized.\");\n\t\t}\n\t\tif (this.services[id].service) {\n\t\t\treturn Promise.resolve(this.services[id]);\n\t\t} else {\n\t\t\treturn this.connect().then(server => {\n\t\t\t\treturn this.server.getPrimaryService(this.services[id].uuid)\n\t\t  })\n\t\t\t.then((service) => {\n\t\t\t\tthis.services[id].service = service;\n\t\t\t\treturn this.services[id];\n\t\t\t});\n\t\t}\n\t}\n\n\tonDisconnected() {\n\t\tthis.server = undefined;\n\t\tfor(let serviceId in this.services) {\n\t\t\tlet serv = this.services[serviceId];\n\t\t\tdelete serv.service;\n\t\t\tfor(let characteristicId in serv.characteristics) {\n\t\t\t\tlet charact = serv.characteristics[characteristicId];\n\t\t\t\tdelete charact.characteristic;\n\t\t\t}\n\t\t}\n\n\t\tif (this.disconnectFct) {\n\t\t\tthis.disconnectFct();\n\t\t}\n\t  console.log('Device ' + this + ' is disconnected.');\n\t}\n\n\tdisconnect() {\n\t  if (!this.device) {\n\t    return;\n\t  }\n\n\t  if (this.device.gatt.connected) {\n\t    this.device.gatt.disconnect();\n\t  } else {\n\t    console.log('Bluetooth Device is already disconnected');\n\t  }\n\t}\n}\n\nexport class BluetoothService {\n\tconstructor(uuid) {\n\t\tthis.uuid = uuid;\n\t\tthis.characteristics = {};\n\t\tthis.service = undefined;\n\t}\n\n\taddCharacteristic(id, uuid) {\n\t\tthis.characteristics[id] = new BluetoothCharacteristic(uuid);\n\t}\n\n\n\tgetCharacteristic(id) {\n\t\tif (!this.characteristics[id]) {\n\t\t\tthrow new Error(\"Characteristic id unknowned :\" + id);\n\t\t}\n\t\tif (!this.service) {\n\t\t\tthrow new Error(\"Service not initialized.\");\n\t\t}\n\t\tif (this.characteristics[id].characteristic) {\n\t\t\treturn Promise.resolve(this.characteristics[id]);\n\t\t} else {\n\t\t\treturn this.service.getCharacteristic(this.characteristics[id].uuid)\n\t\t\t.then((characteristic) => {\n\t\t\t\tthis.characteristics[id].characteristic = characteristic;\n\t\t\t\treturn this.characteristics[id];\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nexport class BluetoothCharacteristic{\n\tconstructor(uuid) {\n\t\tthis.uuid = uuid;\n\t\tthis.characteristic = undefined;\n\t}\n\n\twrite(arrayBuffer) {\n\t\tif (!this.characteristic) {\n\t\t\tPromise.reject(new Error(\"Characteristic not initialized, use getCharacteristic on service.\"));\n\t\t}\n\t\treturn this.characteristic.writeValue(arrayBuffer);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bluetooth/ble.js\n **/","import * as React from 'react'\nimport { Baseplate } from \"./baseplane\";\nimport { BrickShape } from \"./brickshape\";\nimport { Order } from \"../bluetooth/order\";\n\nexport class Driver extends React.Component {\n\n  constructor(props, context) {\n    super(props, context);\n  }\n\n  render() {\n    console.log(\"render\");\n    return (\n      <Baseplate width={18} height={26}>\n        <BrickShape bricks={this.props.shapes[0].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(1)} onTouchEnd={() => this.move(0)} />\n        <BrickShape bricks={this.props.shapes[1].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(2)} onTouchEnd={() => this.move(0)} />\n        <BrickShape bricks={this.props.shapes[2].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(3)} onTouchEnd={() => this.move(0)} />\n        <BrickShape bricks={this.props.shapes[3].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(4)} onTouchEnd={() => this.move(0)} />\n        <BrickShape bricks={this.props.shapes[4].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.disconnect()} />\n        <BrickShape bricks={this.props.shapes[5].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(5)} onTouchEnd={() => this.move(0)} />\n        <BrickShape bricks={this.props.shapes[6].cells} classShape=\"lego grey upper\" />\n        <BrickShape bricks={this.props.shapes[7].cells} classShape=\"lego grey upper\" />\n        <BrickShape bricks={this.props.shapes[8].cells} classShape=\"lego grey upper\" />\n        <BrickShape bricks={this.props.shapes[9].cells} classShape=\"lego grey upper\" />\n      </Baseplate>\n    );\n  }\n\n  move(direction) {\n    this.props.device.getService(\"sCommand\")\n      .then((service) => {\n        return service.getCharacteristic(\"cCommand\")\n      })\n      .then((characteristic) => {\n        return characteristic.write(this.props.move.dataToSend([direction]));\n      }).catch(error => {\n        this.showMessage(\"Erreur lors de l'envoi de la commande à LEO : \" + error + \". Deconnexion en cours...\");\n        console.log(error);\n        setTimeout(() => {\n          this.disconnect();\n        }, 3000);\n      });\n  }\n\n  disconnect() {\n    this.showMessage(\"Au revoir...\");\n    setTimeout(() => {\n      this.showMessage(\"\");\n      this.props.device.disconnect();\n    }, 1000);\n  }\n\n\n  showMessage(msg) {\n    if (this.props.showMessage) {\n      this.props.showMessage(msg);\n    }\n  }\n}\n\nDriver.defaultProps = {\n  move: new Order(0x02),\n  color: new Order(0x03),\n  shapes: [{\n    cells: [\n      //HAUT\n      { x: 9, y: 2 }, { x: 10, y: 2 },\n      { x: 8, y: 3 }, { x: 9, y: 3 }, { x: 10, y: 3 }, { x: 11, y: 3 },\n      { x: 7, y: 4 }, { x: 8, y: 4 }, { x: 9, y: 4 }, { x: 10, y: 4 }, { x: 11, y: 4 }, { x: 12, y: 4 },\n      { x: 6, y: 5 }, { x: 7, y: 5 }, { x: 8, y: 5 }, { x: 9, y: 5 }, { x: 10, y: 5 }, { x: 11, y: 5 }, { x: 12, y: 5 }, { x: 13, y: 5 }\n    ]\n  },\n  {\n    cells: [\n      //BAS\n      { x: 9, y: 17 }, { x: 10, y: 17 },\n      { x: 8, y: 16 }, { x: 9, y: 16 }, { x: 10, y: 16 }, { x: 11, y: 16 },\n      { x: 7, y: 15 }, { x: 8, y: 15 }, { x: 9, y: 15 }, { x: 10, y: 15 }, { x: 11, y: 15 }, { x: 12, y: 15 },\n      { x: 6, y: 14 }, { x: 7, y: 14 }, { x: 8, y: 14 }, { x: 9, y: 14 }, { x: 10, y: 14 }, { x: 11, y: 14 }, { x: 12, y: 14 }, { x: 13, y: 14 }\n    ]\n  },\n  {\n    cells: [\n      //GAUCHE\n      { x: 2, y: 9 }, { x: 2, y: 10 },\n      { x: 3, y: 8 }, { x: 3, y: 9 }, { x: 3, y: 10 }, { x: 3, y: 11 },\n      { x: 4, y: 7 }, { x: 4, y: 8 }, { x: 4, y: 9 }, { x: 4, y: 10 }, { x: 4, y: 11 }, { x: 4, y: 12 },\n      { x: 5, y: 6 }, { x: 5, y: 7 }, { x: 5, y: 8 }, { x: 5, y: 9 }, { x: 5, y: 10 }, { x: 5, y: 11 }, { x: 5, y: 12 }, { x: 5, y: 13 }\n    ]\n  },\n  {\n    cells: [\n      //DROITE\n      { x: 17, y: 9 }, { x: 17, y: 10 },\n      { x: 16, y: 8 }, { x: 16, y: 9 }, { x: 16, y: 10 }, { x: 16, y: 11 },\n      { x: 15, y: 7 }, { x: 15, y: 8 }, { x: 15, y: 9 }, { x: 15, y: 10 }, { x: 15, y: 11 }, { x: 15, y: 12 },\n      { x: 14, y: 6 }, { x: 14, y: 7 }, { x: 14, y: 8 }, { x: 14, y: 9 }, { x: 14, y: 10 }, { x: 14, y: 11 }, { x: 14, y: 12 }, { x: 14, y: 13 }\n    ]\n  },\n  {\n    cells: [\n      //CROIX\n      { x: 8, y: 20 }, { x: 11, y: 20 },\n      { x: 9, y: 21 }, { x: 10, y: 21 }, { x: 9, y: 22 }, { x: 10, y: 22 },\n      { x: 8, y: 23 }, { x: 11, y: 23 }\n    ]\n  },\n  {\n    cells: [\n      //TOUPIE\n      { x: 7, y: 7 }, { x: 8, y: 7 }, { x: 9, y: 7 }, { x: 10, y: 7 }, { x: 11, y: 7 }, { x: 12, y: 7 },\n      { x: 7, y: 8 }, { x: 7, y: 9 }, { x: 7, y: 10 }, { x: 7, y: 11 }, { x: 7, y: 12 },\n      { x: 8, y: 12 }, { x: 9, y: 12 }, { x: 10, y: 12 }, { x: 11, y: 12 }, { x: 12, y: 12 },\n      { x: 12, y: 9 }, { x: 12, y: 10 }, { x: 12, y: 11 },\n      { x: 9, y: 9 }, { x: 10, y: 9 }, { x: 11, y: 9 },\n      { x: 9, y: 10 }\n    ]\n  },\n  {\n    cells: [\n      //HAUT GAUCHE\n      { x: 3, y: 3 }, { x: 4, y: 3 }, { x: 5, y: 3 },\n      { x: 3, y: 4 }, { x: 3, y: 5 }\n    ]\n  },\n  {\n    cells: [\n      //HAUT DROITE\n      { x: 14, y: 3 }, { x: 15, y: 3 }, { x: 16, y: 3 },\n      { x: 16, y: 4 }, { x: 16, y: 5 }\n    ]\n  },\n  {\n    cells: [\n      //BAS GAUCHE\n      { x: 3, y: 14 }, { x: 3, y: 15 }, { x: 3, y: 16 },\n      { x: 4, y: 16 }, { x: 5, y: 16 }\n    ]\n  },\n  {\n    cells: [\n      //BAS DROITE\n      { x: 14, y: 16 }, { x: 15, y: 16 }, { x: 16, y: 16 },\n      { x: 16, y: 14 }, { x: 16, y: 15 }\n    ]\n  }]\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/driver.jsx\n **/","export class Order {\n\n\tconstructor(code) {\n\t\tthis.codeByte = code;\n\t\tthis.headerBytes = [0xBA, 0xBA, 0xAA, 0xAA ];\n\t}\n\n\tdataToSend(bytesValue) {\n\t  var buf = new ArrayBuffer(this.headerBytes.length + 1 + bytesValue.length);\n\t  var bufView = new Uint8Array(buf);\n\t  var idx = 0;\n\t  // Gestion de l'inversion par paire des bytes\n\n\t  for (let i = 0; i < this.headerBytes.length; i+=1) {\n\t    bufView[idx++] = this.headerBytes[i];\n\t  }\n\n\t  bufView[idx++] = this.codeByte;\n\n\t  // Gestion de l'inversion par paire des bytes\n\t  for (let i = 0; i < bytesValue.length; i+=1) {\n\t    bufView[idx++] = bytesValue[i];\n\t  }\n\t  return buf;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bluetooth/order.js\n **/","import * as React from 'react'\n\nexport class Message extends React.Component {\n\n    constructor(props, context) {\n        super(props, context);\n    }\n\n    render() {\n      return(\n        <div>\n        {this.props.show &&\n          <div className=\"popin\">\n            <div className=\"message\" dangerouslySetInnerHTML={this.props.message}>\n\n            </div>\n          </div>\n        }\n      </div>\n      );\n  }\n\n};\n\nMessage.defaultProps = {\n    show: false\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/message.jsx\n **/"],"sourceRoot":""}